<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Army Shooter Game</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      font-family: sans-serif;
      background: #000;
    }
    canvas {
      display: block;
      background: linear-gradient(to bottom, #111, #444);
    }
    #score {
      position: absolute;
      top: 10px;
      left: 10px;
      color: #fff;
      font-size: 24px;
    }
    #gameOver {
      display: none;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      color: white;
    }
    #gameOver h1 {
      font-size: 40px;
    }
    #restartBtn {
      padding: 10px 20px;
      font-size: 20px;
      background-color: #28a745;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }
    #touchArea {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 80px;
      background: rgba(255, 255, 255, 0.1);
    }
    #playerNameInput {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      color: white;
    }
    #playerNameInput input {
      font-size: 20px;
      padding: 10px;
      border-radius: 5px;
    }
    #playerNameInput button {
      font-size: 20px;
      padding: 10px 20px;
      margin-top: 10px;
      border: none;
      border-radius: 5px;
      background: green;
      color: white;
    }
  </style>
</head>
<body>
  <div id="playerNameInput">
    <h1>Enter Your Name</h1>
    <input type="text" id="playerName" placeholder="Your name here" />
    <br/>
    <button onclick="startGame()">Start Game</button>
  </div>
  <div id="score"></div>
  <div id="gameOver">
    <h1 id="gameOverMsg"></h1>
    <button id="restartBtn" onclick="location.reload()">Restart</button>
  </div>
  <canvas id="gameCanvas"></canvas>
  <div id="touchArea"></div>  <script>
    let canvas = document.getElementById("gameCanvas");
    let ctx = canvas.getContext("2d");
    let width = window.innerWidth;
    let height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;

    let player = {
      x: width / 2 - 25,
      y: height - 100,
      width: 50,
      height: 50,
      color: "#0f0",
    };

    let bullets = [];
    let enemies = [];
    let rewards = [];
    let score = 0;
    let gameRunning = true;
    let fireRate = 100;
    let lastFireTime = 0;
    let playerName = "";

    document.getElementById("score").innerText = "Score: 0";

    function startGame() {
      playerName = document.getElementById("playerName").value || "Player";
      document.getElementById("playerNameInput").style.display = "none";
      fireBullets();
      animate();
      spawnEnemies();
    }

    function drawPlayer() {
      ctx.fillStyle = player.color;
      ctx.fillRect(player.x, player.y, player.width, player.height);
    }

    function drawBullets() {
      ctx.fillStyle = "yellow";
      bullets.forEach((b, i) => {
        b.y -= b.speed;
        ctx.fillRect(b.x, b.y, 5, 10);
        if (b.y < 0) bullets.splice(i, 1);
      });
    }

    function drawEnemies() {
      enemies.forEach((e, i) => {
        e.y += e.speed;
        ctx.fillStyle = e.color;
        ctx.fillRect(e.x, e.y, e.size, e.size);
        if (e.y > height) enemies.splice(i, 1);

        // Collision
        if (
          e.x < player.x + player.width &&
          e.x + e.size > player.x &&
          e.y < player.y + player.height &&
          e.y + e.size > player.y
        ) {
          gameOver();
        }
      });
    }

    function drawRewards() {
      rewards.forEach((r, i) => {
        r.y += r.speed;
        ctx.fillStyle = "#0cf";
        ctx.beginPath();
        ctx.arc(r.x, r.y, 15, 0, 2 * Math.PI);
        ctx.fill();

        // Collect reward
        if (
          r.x < player.x + player.width &&
          r.x + 15 > player.x &&
          r.y < player.y + player.height &&
          r.y + 15 > player.y
        ) {
          fireRate = 50;
          setTimeout(() => fireRate = 100, 5000);
          rewards.splice(i, 1);
        }
      });
    }

    function fireBullets() {
      if (!gameRunning) return;
      let now = Date.now();
      if (now - lastFireTime > fireRate) {
        bullets.push({
          x: player.x + player.width / 2 - 2.5,
          y: player.y,
          speed: 15,
        });
        lastFireTime = now;
      }
      requestAnimationFrame(fireBullets);
    }

    function animate() {
      if (!gameRunning) return;
      ctx.clearRect(0, 0, width, height);
      drawPlayer();
      drawBullets();
      drawEnemies();
      drawRewards();
      detectHits();
      requestAnimationFrame(animate);
    }

    function detectHits() {
      enemies.forEach((e, ei) => {
        bullets.forEach((b, bi) => {
          if (
            b.x < e.x + e.size &&
            b.x + 5 > e.x &&
            b.y < e.y + e.size &&
            b.y + 10 > e.y
          ) {
            bullets.splice(bi, 1);
            enemies.splice(ei, 1);
            score += 10;
            document.getElementById("score").innerText = "Score: " + score;
          }
        });
      });
    }

    function spawnEnemies() {
      setInterval(() => {
        if (!gameRunning) return;
        let size = 40;
        enemies.push({
          x: Math.random() * (width - size),
          y: -size,
          size: size,
          speed: 2 + Math.random() * 2,
          color: ["#000", "#0f0", "#f00", "#fff"][Math.floor(Math.random() * 4)]
        });

        // Occasionally spawn rewards
        if (Math.random() < 0.1) {
          rewards.push({
            x: Math.random() * (width - 30),
            y: -30,
            speed: 3
          });
        }
      }, 500);
    }

    function gameOver() {
      gameRunning = false;
      document.getElementById("gameOver").style.display = "block";
      let msg = `Game Over! Your Score: ${score}`;
      if (score >= 100) msg += `<br/>Well done, ${playerName}!`;
      document.getElementById("gameOverMsg").innerHTML = msg;
    }

    // Touch Controls
    let touchArea = document.getElementById("touchArea");
    touchArea.addEventListener("touchstart", handleTouch);
    touchArea.addEventListener("touchmove", handleTouch);

    function handleTouch(e) {
      e.preventDefault();
      let touch = e.touches[0];
      player.x = touch.clientX - player.width / 2;
    }
  </script></body>
</html>
